<!DOCTYPE html>
<html lang="en" ng-app="redditApp" ng-controller="postController">
<head>
	<meta charset="UTF-8">
	<title>Reddit Clone</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular.js"></script>
		<script src="app.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
</head>
<body>
<div class="nav">
	Reddit Clone
	<button ng-click="showform=true">+ Post</button>
	<input ng-model="query">
	Sort by <select ng-model="sort">
	<option value="votes">Votes</option>
	<option value="date">Date</option>
	<option value="title">title</option>
</select>
</div>

<div ng-show="showform==true">
	<form novalidate class="form-style" name = "postform" >
				<div>Title<input type="text" ng-model="post.title" autofocus required>
				Content<input type="text" ng-model="post.content" required>Image<input type="text" ng-model="post.image" required>
				<input type="submit" value="Submit" ng-click="addPost(); showform = false"></div>
		</form>
</div>


<div ng-repeat="post in posts | orderBy: sort | filter:query" class="postDiv">
		<div><img class="image" ng-src="{{post.image}}" alt="{{post.title}}"></div>
		<div class="postContent">
		<h3>{{post.title}}</h3>
		<p>{{post.content}}</p>
		{{post.date | date : fullDate}} | 
		<button ng-show="post.showComments==false" ng-click="post.showComments=true">View Comments</button> 
		<button ng-show="post.showComments==true" ng-click="post.showComments=false">Hide Comments</button> | 
		<button ng-click="post.showCommentForm=true">+ Comment</button>
		</div>
<!-- Add comment form if comment button clicked -->
		<div ng-show="post.showCommentForm==true" class="commentDiv">
			<form novalidate class="form-style" name = "commentform">
				<div>Author<input type="text" ng-model="post.comment.author" autofocus required>
				Comment<input type="text" ng-model="post.comment.content" required><input type="submit" value="Submit" ng-click="addComment(); post.showCommentForm=false"></div>
			</form>
		</div>
<!-- Show comments if view comments is clicked -->
	<div ng-show="post.showComments==true" class="commentDiv" ng-repeat="comment in post.comments">
		<p>{{comment.content}}</p>
		<h5>--{{comment.author}}</h5>
	</div>
</div>

</body>
</html>